<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TradeWise AI - Advanced AI Capabilities Demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .ai-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .opportunity-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
        }
        
        .insight-card {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
        }
        
        .alert-card {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            color: #333;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
        }
        
        .score-badge {
            background: rgba(255,255,255,0.2);
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
        }
        
        .ai-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 0;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="ai-header">
        <div class="container">
            <h1><i class="fas fa-brain"></i> TradeWise AI - Advanced AI Capabilities</h1>
            <p class="lead">Real-time AI-powered investment intelligence that separates us from all competitors</p>
        </div>
    </div>

    <div class="container mt-4">
        <!-- AI Capabilities Overview -->
        <div class="row">
            <div class="col-12">
                <div class="ai-card">
                    <h2><i class="fas fa-robot"></i> Our AI Advantage</h2>
                    <p>TradeWise AI features 5 specialized AI subsystems working together to provide institutional-grade analysis:</p>
                    <div class="row">
                        <div class="col-md-4">
                            <h6><i class="fas fa-chart-line"></i> Pattern Recognition AI</h6>
                            <small>Identifies market trends and technical patterns</small>
                        </div>
                        <div class="col-md-4">
                            <h6><i class="fas fa-heart-pulse"></i> Sentiment Analysis AI</h6>
                            <small>Analyzes market psychology and sentiment</small>
                        </div>
                        <div class="col-md-4">
                            <h6><i class="fas fa-shield-alt"></i> Risk Assessment AI</h6>
                            <small>Comprehensive risk evaluation and mitigation</small>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-md-6">
                            <h6><i class="fas fa-search-dollar"></i> Opportunity Detection AI</h6>
                            <small>Real-time investment opportunity scanning</small>
                        </div>
                        <div class="col-md-6">
                            <h6><i class="fas fa-crystal-ball"></i> Predictive Analytics AI</h6>
                            <small>Future price movement predictions</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Real-Time Opportunities -->
        <div class="row">
            <div class="col-12">
                <h3><i class="fas fa-bolt"></i> Live AI Opportunities</h3>
                <button class="btn btn-primary mb-3" onclick="loadLiveOpportunities()">
                    <i class="fas fa-sync"></i> Scan for Opportunities
                </button>
                <div id="opportunities-container"></div>
            </div>
        </div>

        <!-- Enhanced AI Analysis -->
        <div class="row mt-4">
            <div class="col-12">
                <h3><i class="fas fa-microscope"></i> Enhanced AI Analysis</h3>
                <div class="input-group mb-3">
                    <input type="text" class="form-control" id="analysisSymbol" placeholder="Enter stock symbol (e.g., AAPL)" value="NVDA">
                    <button class="btn btn-success" onclick="performEnhancedAnalysis()">
                        <i class="fas fa-brain"></i> Analyze with AI
                    </button>
                </div>
                <div id="analysis-container"></div>
            </div>
        </div>

        <!-- Predictive Alerts -->
        <div class="row mt-4">
            <div class="col-12">
                <h3><i class="fas fa-bell"></i> AI Predictive Alerts</h3>
                <div class="input-group mb-3">
                    <input type="text" class="form-control" id="alertSymbol" placeholder="Enter stock symbol (e.g., TSLA)" value="TSLA">
                    <button class="btn btn-warning" onclick="getPredictiveAlerts()">
                        <i class="fas fa-exclamation-triangle"></i> Get AI Alerts
                    </button>
                </div>
                <div id="alerts-container"></div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function loadLiveOpportunities() {
            document.getElementById('opportunities-container').innerHTML = 
                '<div class="text-center"><i class="fas fa-spinner fa-spin"></i> AI scanning markets...</div>';
            
            fetch('/api/ai/live-opportunities')
                .then(response => response.json())
                .then(data => {
                    if (data.success && data.opportunities && data.opportunities.opportunities) {
                        displayOpportunities(data.opportunities.opportunities, data.opportunities.ai_confidence);
                    } else {
                        document.getElementById('opportunities-container').innerHTML = 
                            '<div class="alert alert-warning">No opportunities found at this time.</div>';
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    document.getElementById('opportunities-container').innerHTML = 
                        '<div class="alert alert-danger">Error loading opportunities</div>';
                });
        }

        function displayOpportunities(opportunities, confidence) {
            let html = `<div class="alert alert-info">
                <i class="fas fa-brain"></i> AI Confidence: <strong>${confidence.toFixed(1)}%</strong>
                | Found ${opportunities.length} opportunities
            </div>`;
            
            opportunities.forEach(opp => {
                html += `
                    <div class="opportunity-card">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h5><i class="fas fa-chart-line"></i> ${opp.symbol}</h5>
                                <p class="mb-1">${opp.reasoning}</p>
                                <small><strong>Action:</strong> ${opp.action_required}</small>
                            </div>
                            <div class="text-end">
                                <div class="score-badge">Score: ${opp.score}</div>
                                <div class="mt-2">
                                    <small>$${opp.current_price} (${opp.price_change_1d > 0 ? '+' : ''}${opp.price_change_1d.toFixed(2)}%)</small>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            document.getElementById('opportunities-container').innerHTML = html;
        }

        function performEnhancedAnalysis() {
            const symbol = document.getElementById('analysisSymbol').value.toUpperCase();
            if (!symbol) return;
            
            document.getElementById('analysis-container').innerHTML = 
                '<div class="text-center"><i class="fas fa-spinner fa-spin"></i> AI analyzing ' + symbol + '...</div>';
            
            fetch('/api/ai/enhanced-analysis', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({symbol: symbol})
            })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        displayEnhancedAnalysis(data.enhanced_analysis, data.symbol);
                    } else {
                        document.getElementById('analysis-container').innerHTML = 
                            '<div class="alert alert-danger">Error: ' + data.error + '</div>';
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    document.getElementById('analysis-container').innerHTML = 
                        '<div class="alert alert-danger">Analysis failed</div>';
                });
        }

        function displayEnhancedAnalysis(analysis, symbol) {
            let html = `
                <div class="insight-card">
                    <h4><i class="fas fa-brain"></i> Enhanced AI Analysis for ${symbol}</h4>
                    <div class="row">
                        <div class="col-md-6">
                            <h6>Market Intelligence</h6>
                            <p><strong>Current Price:</strong> $${analysis.current_price}</p>
                            <p><strong>Market Cap:</strong> ${formatMarketCap(analysis.market_cap)}</p>
                            <p><strong>Sector:</strong> ${analysis.sector}</p>
                        </div>
                        <div class="col-md-6">
                            <h6>AI Enhancement Features</h6>
                            <ul>
                                <li>Real-time market intelligence ✓</li>
                                <li>AI predictions ✓</li>
                                <li>Opportunity scoring ✓</li>
                                <li>Risk intelligence ✓</li>
                                <li>Competitive analysis ✓</li>
                            </ul>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('analysis-container').innerHTML = html;
        }

        function getPredictiveAlerts() {
            const symbol = document.getElementById('alertSymbol').value.toUpperCase();
            if (!symbol) return;
            
            document.getElementById('alerts-container').innerHTML = 
                '<div class="text-center"><i class="fas fa-spinner fa-spin"></i> AI generating predictive alerts...</div>';
            
            fetch(`/api/ai/predictive-alerts/${symbol}`)
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        displayPredictiveAlerts(data.alerts, data.current_metrics, data.symbol);
                    } else {
                        document.getElementById('alerts-container').innerHTML = 
                            '<div class="alert alert-danger">Error: ' + data.error + '</div>';
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    document.getElementById('alerts-container').innerHTML = 
                        '<div class="alert alert-danger">Alert generation failed</div>';
                });
        }

        function displayPredictiveAlerts(alerts, metrics, symbol) {
            let html = `
                <div class="alert alert-info">
                    <h6><i class="fas fa-chart-bar"></i> Current Metrics for ${symbol}</h6>
                    <div class="row">
                        <div class="col-md-3">Price: $${metrics.price}</div>
                        <div class="col-md-3">5D Momentum: ${metrics.momentum_5d.toFixed(2)}%</div>
                        <div class="col-md-3">Volatility: ${metrics.volatility.toFixed(2)}%</div>
                        <div class="col-md-3">Volume: ${metrics.volume_ratio}x</div>
                    </div>
                </div>
            `;
            
            if (alerts.length === 0) {
                html += '<div class="alert alert-success">No immediate alerts - normal market conditions detected</div>';
            } else {
                alerts.forEach(alert => {
                    const urgencyClass = alert.urgency === 'High' ? 'alert-danger' : 
                                       alert.urgency === 'Medium' ? 'alert-warning' : 'alert-info';
                    html += `
                        <div class="alert-card">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <h6><i class="fas fa-exclamation-triangle"></i> ${alert.type}</h6>
                                    <p class="mb-1">${alert.message}</p>
                                    <small><strong>Action:</strong> ${alert.action}</small>
                                </div>
                                <div class="text-end">
                                    <span class="badge bg-${alert.urgency === 'High' ? 'danger' : 'warning'}">
                                        ${alert.urgency} Priority
                                    </span>
                                    <div class="mt-1">
                                        <small>Confidence: ${alert.confidence}%</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                });
            }
            
            document.getElementById('alerts-container').innerHTML = html;
        }

        function formatMarketCap(marketCap) {
            if (marketCap > 1e12) return '$' + (marketCap / 1e12).toFixed(1) + 'T';
            if (marketCap > 1e9) return '$' + (marketCap / 1e9).toFixed(1) + 'B';
            if (marketCap > 1e6) return '$' + (marketCap / 1e6).toFixed(1) + 'M';
            return '$' + marketCap.toLocaleString();
        }

        // Auto-load opportunities on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadLiveOpportunities();
        });
    </script>
</body>
</html>