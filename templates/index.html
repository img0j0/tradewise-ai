{% extends "base.html" %}

{% block content %}
<!-- Welcome Banner -->
<div class="row mb-4">
    <div class="col-12">
        <div class="welcome-banner">
            <div class="welcome-content">
                <h2 class="welcome-title">Welcome to Your Trading Command Center</h2>
                <p class="welcome-subtitle">AI-powered insights at your fingertips</p>
            </div>
            <div class="welcome-stats">
                <div class="welcome-stat">
                    <span class="stat-icon"><i class="fas fa-brain"></i></span>
                    <span class="stat-value" id="ai-accuracy">98%</span>
                    <span class="stat-label">AI Accuracy</span>
                </div>
                <div class="welcome-stat">
                    <span class="stat-icon"><i class="fas fa-chart-trending-up"></i></span>
                    <span class="stat-value" id="market-trend">Bullish</span>
                    <span class="stat-label">Market Trend</span>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <!-- Market Overview -->
    <div class="col-12 mb-4">
        <div class="card bg-secondary market-overview-card">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="fas fa-globe me-2"></i>Live Market Pulse
                    <small class="text-muted ms-2" id="last-updated">Loading...</small>
                </h5>
            </div>
            <div class="card-body">
                <div class="row text-center">
                    <div class="col-md-2">
                        <div class="stat-card">
                            <div class="stat-number text-primary" id="total-stocks">-</div>
                            <div class="stat-label">Total Stocks</div>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="stat-card">
                            <div class="stat-number text-success" id="gainers">-</div>
                            <div class="stat-label">Gainers</div>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="stat-card">
                            <div class="stat-number text-danger" id="losers">-</div>
                            <div class="stat-label">Losers</div>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="stat-card">
                            <div class="stat-number text-warning" id="unchanged">-</div>
                            <div class="stat-label">Unchanged</div>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="stat-card">
                            <div class="stat-number" id="avg-change">-</div>
                            <div class="stat-label">Avg Change</div>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="stat-card">
                            <div class="stat-number text-info" id="total-volume">-</div>
                            <div class="stat-label">Total Volume</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Main Content Sections -->
<div id="dashboard-section">
    <div class="row">
        <!-- Performance Summary -->
        <div class="col-lg-4 mb-4">
            <div class="card bg-dark performance-card">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-trophy me-2"></i>Your Performance</h5>
                </div>
                <div class="card-body">
                    <div class="performance-stats">
                        <div class="stat-row">
                            <span>Total Trades:</span>
                            <span class="text-primary" id="total-trades">0</span>
                        </div>
                        <div class="stat-row">
                            <span>Win Rate:</span>
                            <span class="text-success" id="win-rate">0%</span>
                        </div>
                        <div class="stat-row">
                            <span>Total P&L:</span>
                            <span id="total-pnl">$0.00</span>
                        </div>
                        <div class="stat-row">
                            <span>Avg Confidence:</span>
                            <span class="text-info" id="avg-confidence">0%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Top Movers -->
        <div class="col-lg-8 mb-4">
            <div class="card bg-dark top-movers-card">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-trending-up me-2"></i>Top Movers</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6 class="text-success">Top Gainers</h6>
                            <div id="top-gainers">
                                <div class="text-center text-muted">Loading...</div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <h6 class="text-danger">Top Losers</h6>
                            <div id="top-losers">
                                <div class="text-center text-muted">Loading...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Recent Trades and Alerts -->
    <div class="row">
        <div class="col-lg-6 mb-4">
            <div class="card bg-dark recent-trades-card">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-history me-2"></i>Recent Trades</h5>
                </div>
                <div class="card-body">
                    <div id="recent-trades">
                        <div class="text-center text-muted">No recent trades</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-lg-6 mb-4">
            <div class="card bg-dark active-alerts-card">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-bell me-2"></i>Active Alerts</h5>
                </div>
                <div class="card-body">
                    <div id="active-alerts">
                        <div class="text-center text-muted">No active alerts</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Stocks Section -->
<div id="stocks-section" style="display: none;">
    <div class="row mb-4">
        <div class="col-12">
            <div class="card bg-dark stock-filters-card">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-filter me-2"></i>Stock Filters</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3">
                            <label for="sector-filter" class="form-label">Sector</label>
                            <select class="form-select" id="sector-filter">
                                <option value="">All Sectors</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label for="min-price" class="form-label">Min Price</label>
                            <input type="number" class="form-control" id="min-price" placeholder="0.00" step="0.01">
                        </div>
                        <div class="col-md-3">
                            <label for="max-price" class="form-label">Max Price</label>
                            <input type="number" class="form-control" id="max-price" placeholder="1000.00" step="0.01">
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">&nbsp;</label>
                            <button class="btn btn-primary d-block w-100" onclick="applyFilters()">
                                <i class="fas fa-search me-1"></i>Apply Filters
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="row">
        <div class="col-12">
            <div class="card bg-dark stock-scanner-card">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-chart-area me-2"></i>Stock Ticker Scanner</h5>
                </div>
                <div class="card-body">
                    <div id="stocks-list">
                        <div class="text-center text-muted">Loading stocks...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Alerts Section -->
<div id="alerts-section" style="display: none;">
    <div class="row">
        <div class="col-12">
            <div class="card bg-dark trading-alerts-card">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-bell me-2"></i>Trading Alerts</h5>
                </div>
                <div class="card-body">
                    <div id="alerts-list">
                        <div class="text-center text-muted">Loading alerts...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Portfolio Section -->
<div id="portfolio-section" style="display: none;">
    <div class="row">
        <div class="col-12">
            <div class="card bg-dark portfolio-holdings-card">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-briefcase me-2"></i>Portfolio Holdings</h5>
                </div>
                <div class="card-body">
                    <div id="portfolio-summary" class="mb-4">
                        <div class="row text-center">
                            <div class="col-md-3">
                                <div class="stat-card">
                                    <div class="stat-number text-primary" id="portfolio-value">$0.00</div>
                                    <div class="stat-label">Total Value</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stat-card">
                                    <div class="stat-number text-info" id="portfolio-cost">$0.00</div>
                                    <div class="stat-label">Total Cost</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stat-card">
                                    <div class="stat-number" id="portfolio-pnl">$0.00</div>
                                    <div class="stat-label">P&L</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stat-card">
                                    <div class="stat-number" id="portfolio-pnl-pct">0%</div>
                                    <div class="stat-label">P&L %</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="portfolio-holdings">
                        <div class="text-center text-muted">No holdings found</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Trade Modal -->
<div class="modal fade" id="tradeModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content bg-dark">
            <div class="modal-header">
                <h5 class="modal-title">Execute Trade</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="trade-form">
                    <div class="mb-3">
                        <label for="trade-symbol" class="form-label">Symbol</label>
                        <input type="text" class="form-control" id="trade-symbol" readonly>
                    </div>
                    <div class="mb-3">
                        <label for="trade-action" class="form-label">Action</label>
                        <select class="form-select" id="trade-action">
                            <option value="buy">Buy</option>
                            <option value="sell">Sell</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="trade-quantity" class="form-label">Quantity</label>
                        <input type="number" class="form-control" id="trade-quantity" min="1" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Current Price</label>
                        <div class="form-control-plaintext" id="trade-current-price">-</div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">AI Confidence</label>
                        <div class="form-control-plaintext" id="trade-confidence">-</div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" onclick="executeTrade()">Execute Trade</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}
