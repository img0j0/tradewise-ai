<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>{% block title %}TradeWise AI{% endblock %}</title>
    
    <!-- iPhone/iOS specific optimizations -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="TradeWise AI">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    
    <!-- iOS Safe Area CSS Variables -->
    <style>
    :root {
        --safe-area-inset-top: env(safe-area-inset-top);
        --safe-area-inset-right: env(safe-area-inset-right);
        --safe-area-inset-bottom: env(safe-area-inset-bottom);
        --safe-area-inset-left: env(safe-area-inset-left);
        
        /* Dynamic viewport height for mobile */
        --vh: 1vh;
        --vw: 1vw;
    }
    
    /* Mobile viewport height fix */
    @media (max-width: 768px) {
        :root {
            --vh: 1vh;
        }
    }
    
    /* App Store specific optimizations */
    body {
        padding-top: var(--safe-area-inset-top);
        padding-bottom: var(--safe-area-inset-bottom);
        padding-left: var(--safe-area-inset-left);
        padding-right: var(--safe-area-inset-right);
        
        /* iOS specific fixes */
        -webkit-user-select: none;
        -webkit-touch-callout: none;
        -webkit-text-size-adjust: none;
        -webkit-tap-highlight-color: transparent;
        
        /* Prevent horizontal scrolling */
        overflow-x: hidden;
        position: relative;
    }
    
    /* Container optimizations */
    .container-fluid {
        padding-left: max(15px, var(--safe-area-inset-left));
        padding-right: max(15px, var(--safe-area-inset-right));
    }
    
    /* Navigation improvements */
    .clean-navigation {
        padding-top: max(0.5rem, var(--safe-area-inset-top));
        padding-bottom: 0.5rem;
        position: sticky;
        top: 0;
        z-index: 1000;
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
    }
    
    /* Mobile-first button sizing */
    .nav-btn {
        min-height: 44px;
        min-width: 44px;
        padding: 0.5rem 1rem;
        font-size: 14px;
        border-radius: 12px;
        transition: all 0.2s ease;
        -webkit-tap-highlight-color: transparent;
    }
    
    @media (max-width: 480px) {
        .nav-btn span {
            font-size: 12px;
        }
        
        .nav-btn {
            padding: 0.375rem 0.75rem;
            min-height: 40px;
            min-width: 40px;
        }
    }
    </style>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}?v={{ range(1000, 9999) | random }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/micro_interactions.css') }}?v={{ range(1000, 9999) | random }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/iphone_optimization.css') }}?v={{ range(1000, 9999) | random }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/google_search.css') }}?v={{ range(1000, 9999) | random }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/ai_autocomplete.css') }}?v={{ range(1000, 9999) | random }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/text_readability_fix.css') }}?v={{ range(1000, 9999) | random }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/app_store_search.css') }}?v={{ range(1000, 9999) | random }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/ai_results.css') }}?v={{ range(1000, 9999) | random }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/mobile_optimization.css') }}?v={{ range(1000, 9999) | random }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/mobile_search_optimization.css') }}?v={{ range(1000, 9999) | random }}">
</head>
<body class="bg-dark text-light">
    <!-- Clean Interactive Navigation -->
    <div class="clean-navigation">
        <div class="container">
            <div class="nav-buttons">
                <button class="nav-btn {% if request.endpoint == 'index' %}active{% endif %}" onclick="window.location.href='/'">
                    <i class="fas fa-search"></i>
                    <span>Search</span>
                </button>
                <button class="nav-btn {% if request.endpoint == 'dashboard' %}active{% endif %}" onclick="window.location.href='/dashboard'">
                    <i class="fas fa-chart-line"></i>
                    <span>Dashboard</span>
                </button>
                <button class="nav-btn {% if request.endpoint == 'analytics' %}active{% endif %}" onclick="window.location.href='/analytics'">
                    <i class="fas fa-chart-bar"></i>
                    <span>Analytics</span>
                </button>
                <button class="nav-btn {% if request.endpoint == 'portfolio' %}active{% endif %}" onclick="window.location.href='/portfolio'">
                    <i class="fas fa-briefcase"></i>
                    <span>Portfolio</span>
                </button>
                <button class="nav-btn {% if request.endpoint == 'alerts' %}active{% endif %}" onclick="window.location.href='/alerts'">
                    <i class="fas fa-bell"></i>
                    <span>Alerts</span>
                </button>
            </div>
        </div>
    </div>
    
    <main class="container-fluid py-4">
        {% block content %}{% endblock %}
    </main>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Mobile Viewport Fix -->
    <script src="{{ url_for('static', filename='js/mobile_viewport_fix.js') }}"></script>
    
    <!-- Socket.IO for real-time updates -->
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    
    <!-- Chart.js for advanced charting -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    
    <!-- Custom JavaScript files -->
    {% block scripts %}{% endblock %}
</body>
</html>

<style>
/* Clean Navigation Styling */
.clean-navigation {
    background: rgba(255, 255, 255, 0.02);
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(15px);
    padding: 1rem 0;
    position: sticky;
    top: 0;
    z-index: 1000;
}

.nav-buttons {
    display: flex;
    justify-content: center;
    gap: 0.5rem;
    flex-wrap: wrap;
}

.nav-btn {
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 20px;
    padding: 0.75rem 1.5rem;
    color: rgba(255, 255, 255, 0.8);
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.9rem;
    font-weight: 500;
    text-decoration: none;
}

.nav-btn:hover {
    background: rgba(255, 255, 255, 0.08);
    border-color: rgba(255, 255, 255, 0.2);
    color: #ffffff;
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}

.nav-btn.active {
    background: linear-gradient(135deg, #00d4ff, #00ff88);
    color: #000000;
    border-color: transparent;
}

.nav-btn.active:hover {
    background: linear-gradient(135deg, #00b8e6, #00e079);
    color: #000000;
}

.nav-btn i {
    font-size: 1rem;
}

@media (max-width: 768px) {
    .nav-btn span {
        display: none;
    }
    
    .nav-btn {
        padding: 0.75rem;
        min-width: 50px;
        justify-content: center;
    }
}

/* Page Content Styling */
.page-content {
    max-width: 1200px;
    margin: 2rem auto;
    padding: 0 1rem;
}

.page-header {
    text-align: center;
    margin-bottom: 3rem;
}

.page-title {
    font-size: 2.5rem;
    font-weight: 300;
    color: #ffffff;
    margin-bottom: 1rem;
}

.page-subtitle {
    font-size: 1.1rem;
    color: rgba(255, 255, 255, 0.7);
    margin-bottom: 0;
}
</style>